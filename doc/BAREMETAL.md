## Booting Composite kernel on Bare-metal (x86)

[Composite](http://http://composite.seas.gwu.edu/) kernel can be booted up from any bootloader that supports [Multiboot specification](https://www.gnu.org/software/grub/manual/multiboot/multiboot.html).

Procedure (from *transfer* directory):
* Run *geniso.sh* script: This generates **composite.iso** bootable CD-ROM image.
* Run *qemu-iso.sh* script to execute *composite.iso* in [Qemu](http://wiki.qemu.org/Main_Page) emulator.
* To Boot *composite.iso* on Bare metal: 
	* Burn this image in to a USB: `sudo dd if=**composite.iso** of=/dev/sdX bs=8M`
	* Reboot PC and select USB as Bootable device from BIOS.

This is the most straight forward and less tedious way to boot on Bare metal.

## Working with Grub bootloaders on the Host PC Disk
**(I've not tested these with the latest Composite kernel.)** 
These are just some leads that you can use if you don't have Flash drive or would rather boot from Disk.

### Grub-legacy

In order to boot from Grub-legacy, do the following: 

* Add an entry in to the /boot/grub/menu.lst.

```
title 	Composite kernel
	kernel	/boot/co_kernel.img
    module	/boot/40800000-40800870
    quiet
```
* After this is done, save menu.lst and reboot the PC. 
* Select 'Composite kernel' from Grub-legacy bootloader.

### Grub2 

In order to boot from Grub2, do the following: 

* Add an entry in to the /etc/grub.d/40_custom.

```
menuentry "Composite kernel" {
	multiboot	/boot/co_kernel.img
    module	/boot/40800000-40800870 /boot/40800000-40800870
    boot
}
```
* Update grub: `sudo update-grub`. Reboot the PC.
* Select 'Composite kernel' from Grub2 bootloader.

**Note: ** For this to work, there is some work to do in Composite src ;)

	1. You have to copy the composite kernel image and the module to /boot/. 
	2. You may need to rename your kernel.img or edit 'kernel' line above to match what you've.
	3. You have to make sure that the name of the module in Grub config file is same as module generated by 'micro_boot.sh'.


### Debug: Console or VGA 

You can see the Logs on VGA but is not something that you'd really want to work with because VGA buffer is **25rows * 80 cols** which limits the display to most recent 25 lines of logs and the log rotates.

### Debug: Serial

I've not used it as there is some serial compatibility issues, need a serial cable with female connectors at both end to connect 2 PCs or a USB at one end! That didn't work out well! 

But with Qemu emulation, you'll be able to see Serial output. 